(this.webpackJsonpqrmenu_frontend=this.webpackJsonpqrmenu_frontend||[]).push([[0],{159:function(e,t,n){},283:function(e,t,n){"use strict";n.r(t);n(153),n(154);var c=n(1),a=n.n(c),r=n(20),s=n.n(r),i=(n(159),n(25)),o=n(15),j=n(23),l=n(10),b=n(11),d=n(9);function u(e,t){var n=t.data,c=void 0===n?null:n,a=t.token,r=void 0===a?null:a,s=t.method,i=void 0===s?"GET":s;return fetch(e,{method:i,headers:{Authorization:r?"Token ".concat(r):"","Content-Type":"application/json"},body:"GET"!==i&&"DELETE"!==i?JSON.stringify(c):null}).then((function(e){return e.ok?"DELETE"===i||e.json():e.json().then((function(t){if(400===e.status){var n=Object.keys(t).map((function(e){return"".concat(t[e].join(" "))}));throw new Error(n.join(" "))}throw new Error(JSON.stringify(t))})).catch((function(t){if("SyntaxError"===t.name)throw new Error(e.statusText);throw new Error(t)}))})).catch((function(e){Object(j.b)(e.message,{type:"error"})}))}function O(e,t){return u("/auth/token/login/",{data:{username:e,password:t},method:"POST"})}function h(e,t){return u("/auth/users/",{data:{username:e,password:t},method:"POST"})}function x(e,t){return u("/api/places/".concat(e),{token:t})}function p(e,t,n){return u("/api/places/".concat(e),{data:t,token:n,method:"PATCH"})}var m=n(2),f=Object(c.createContext)(),v=function(e){var t=e.children,n=Object(c.useState)(localStorage.getItem("token")),a=Object(d.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(!1),o=Object(d.a)(i,2),j=o[0],u=o[1],x=function(){var e=Object(b.a)(Object(l.a)().mark((function e(t,n,c){var a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,O(t,n);case 3:a=e.sent,console.log("response",a),a&&a.auth_token&&(localStorage.setItem("token",a.auth_token),s(a.auth_token),c()),u(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),p=function(){var e=Object(b.a)(Object(l.a)().mark((function e(t,n,c){var a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,h(t,n);case 3:(a=e.sent)&&a.id&&c(),u(!1);case 6:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),v={token:r,loading:j,signIn:x,signOut:function(){localStorage.removeItem("token"),s("")},register:p};return Object(m.jsx)(f.Provider,{value:v,children:t})},g=f,k=n(16),y=n(135),C=["children"];var w,N=function(e){var t=e.children,n=Object(y.a)(e,C),a=Object(c.useContext)(g);return Object(m.jsx)(o.b,Object(k.a)(Object(k.a)({},n),{},{render:function(e){var n=e.location;return a.token?t:Object(m.jsx)(o.a,{to:{pathname:"/login",state:{from:n}}})}}))},S=n(288),E=n(287),_=n(289),z=n(136),P=n(290),T=n(291),L=n(297),I=n(296),D=function(e){var t=e.children,n=Object(o.g)(),a=Object(c.useContext)(g);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(L.a,{bg:"light",variant:"light",className:"mb-4",children:[Object(m.jsx)(L.a.Brand,{href:"/",children:"QR Menu"}),Object(m.jsx)(I.a,{children:Object(m.jsx)(I.a.Link,{onClick:function(){n.push("/places")},children:"Places"})}),Object(m.jsx)(I.a,{className:"flex-grow-1 justify-content-end",children:a.token?Object(m.jsx)(I.a.Link,{onClick:function(){a.signOut(),n.push("/login")},children:"Logout"}):[Object(m.jsx)(I.a.Link,{onClick:function(){n.replace("/login")},children:"Login"},1),Object(m.jsx)(I.a.Link,{onClick:function(){n.replace("/register")},children:"Register"},2)]})]}),Object(m.jsx)(E.a,{children:t})]})},A=function(){return Object(m.jsx)(D,{children:Object(m.jsx)(S.a,{className:"bg-light",children:Object(m.jsx)(E.a,{children:Object(m.jsxs)(_.a,{children:[Object(m.jsxs)(z.a,{md:6,className:"my-auto",children:[Object(m.jsx)("h1",{children:Object(m.jsx)("b",{children:"QR Code Menu"})}),Object(m.jsx)("h5",{className:"mt-4 mb-4",children:"A smart way to share your digital menu in a QR Code with your customers"}),Object(m.jsx)("br",{}),Object(m.jsx)(P.a,{href:"/places",variant:"standard",size:"lg",children:"Create Your Menu"})]}),Object(m.jsx)(z.a,{md:6,children:Object(m.jsx)(T.a,{src:"https://assets.materialup.com/uploads/ae60e834-349c-4c94-8189-2450f09ad37a/preview.gif",rounded:!0,fluid:!0})})]})})})})},G=n(299),M=n(295),R=n(292),q=function(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(d.a)(r,2),i=s[0],j=s[1],l=Object(o.g)(),b=Object(c.useContext)(g);Object(c.useEffect)((function(){b.token&&l.replace("/places")}));return Object(m.jsx)(D,{children:Object(m.jsx)(_.a,{className:"justify-content-center",children:Object(m.jsx)(z.a,{lg:6,md:8,children:Object(m.jsx)(G.a,{children:Object(m.jsxs)(G.a.Body,{children:[Object(m.jsx)("h3",{className:"text-center",children:Object(m.jsx)("b",{children:"LOGIN"})}),Object(m.jsxs)(M.a.Group,{children:[Object(m.jsx)(M.a.Label,{children:"Username"}),Object(m.jsx)(M.a.Control,{type:"text",placeholder:"Enter Username",value:n,onChange:function(e){return a(e.target.value)}})]}),Object(m.jsxs)(M.a.Group,{children:[Object(m.jsx)(M.a.Label,{children:"Password"}),Object(m.jsx)(M.a.Control,{type:"password",placeholder:"Enter Password",value:i,onChange:function(e){return j(e.target.value)}})]}),Object(m.jsx)(P.a,{variant:"standard",block:!0,onClick:function(){b.signIn(n,i,(function(){return l.replace("/places")}))},disabled:b.loading,children:b.loading?Object(m.jsx)(R.a,{variant:"standard",as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Sign In"})]})})})})})},H=function(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(d.a)(r,2),i=s[0],j=s[1],l=Object(o.g)(),b=Object(c.useContext)(g);Object(c.useEffect)((function(){b.token&&l.replace("/places")}));return Object(m.jsx)(D,{children:Object(m.jsx)(_.a,{className:"justify-content-center",children:Object(m.jsx)(z.a,{lg:6,md:8,children:Object(m.jsx)(G.a,{children:Object(m.jsxs)(G.a.Body,{children:[Object(m.jsx)("h3",{className:"text-center",children:Object(m.jsx)("b",{children:"REGISTER"})}),Object(m.jsxs)(M.a.Group,{children:[Object(m.jsx)(M.a.Label,{children:"Username"}),Object(m.jsx)(M.a.Control,{type:"text",placeholder:"Enter Username",value:n,onChange:function(e){return a(e.target.value)}})]}),Object(m.jsxs)(M.a.Group,{children:[Object(m.jsx)(M.a.Label,{children:"Password"}),Object(m.jsx)(M.a.Control,{type:"password",placeholder:"Enter Password",value:i,onChange:function(e){return j(e.target.value)}})]}),Object(m.jsx)(P.a,{variant:"standard",block:!0,onClick:function(){b.register(n,i,(function(){return l.replace("/places")}))},disabled:b.loading,children:b.loading?Object(m.jsx)(R.a,{variant:"standard",as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Register"})]})})})})})},U=n(13),B=n(294),Q=n(14),Y=n(151),F=Q.a.div(w||(w=Object(U.a)(["\n  border: 1px dashed #ced4d9;\n  border-radius: 5px;\n  color: #6c757d;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 142px;\n  img {\n    height: 140px;\n  }\n"])));var J,$,V,Z,K,W,X,ee,te,ne,ce,ae,re=function(e){var t=e.value,n=e.onChange,a=Object(c.useState)(!1),r=Object(d.a)(a,2),s=r[0],i=r[1],o=Object(c.useCallback)((function(e){console.log(e),i(!0),function(e){var t=new FormData;return t.append("file",e),t.append("upload_preset","qrmenu_photos"),fetch("https://api.cloudinary.com/v1_1/dtb7kciiu/image/upload",{method:"POST",body:t}).then((function(e){return e.json()}))}(e[0]).then((function(e){return n(e.url)})).finally((function(){return i(!1)}))}),[]),j=Object(Y.a)({onDrop:o,multiple:!1,accept:"image/*"}),l=j.getRootProps,b=j.getInputProps;return Object(m.jsxs)(F,Object(k.a)(Object(k.a)({},l()),{},{children:[Object(m.jsx)("input",Object(k.a)({},b())),t?Object(m.jsx)("img",{src:t}):s?Object(m.jsx)(R.a,{variant:"standard",animation:"border",role:"staus"}):Object(m.jsx)("span",{children:"Drag & drop file here, or click to select file"})]}))},se=function(e){var t=e.onDone,n=Object(c.useState)(""),a=Object(d.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(""),o=Object(d.a)(i,2),j=o[0],O=o[1],h=Object(c.useContext)(g),x=function(){var e=Object(b.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n={name:r,image:j},c=h.token,u("/api/places/",{data:n,token:c,method:"POST"});case 2:e.sent&&(s(""),O(""),t());case 4:case"end":return e.stop()}var n,c}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{children:[Object(m.jsx)("h4",{className:"text-center",children:"Place"}),Object(m.jsxs)(M.a.Group,{children:[Object(m.jsx)(M.a.Label,{children:"Name"}),Object(m.jsx)(M.a.Control,{type:"text",placeholder:"Enter Name",value:r,onChange:function(e){return s(e.target.value)}})]}),Object(m.jsxs)(M.a.Group,{children:[Object(m.jsx)(M.a.Label,{children:"Image"}),Object(m.jsx)(re,{value:j,onChange:O})]}),Object(m.jsx)(P.a,{variant:"standard",block:!0,onClick:x,children:"Add"})]})},ie=Q.a.div(J||(J=Object(U.a)(["\n  margin-bottom: 20px;\n  cursor: pointer;\n  transition: all 0.2s;\n  :hover {\n    transform: scale(1.05);\n  }\n  > div {\n    background-size: cover;\n    height: 200px;\n    border-radius: 5px;\n  }\n  > p {\n    margin-top: 5px;\n    font-size: 20px;\n    font-weight: bold;\n  }\n"]))),oe=Q.a.div($||($=Object(U.a)(["\n  border: 1px dashed gray;\n  height: 200px;\n  border-radius: 5px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 20px;\n  cursor: pointer;\n  background-color: white;\n  :hover {\n    background-color: #fbfbfb;\n  }\n"]))),je=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),s=Object(d.a)(r,2),i=s[0],j=s[1],O=Object(c.useContext)(g),h=Object(o.g)(),x=function(){return j(!1)},p=function(){var e=Object(b.a)(Object(l.a)().mark((function e(){var t;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u("/api/places/",{token:O.token});case 2:(t=e.sent)&&a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){p()}),[]),Object(m.jsxs)(D,{children:[Object(m.jsx)("h3",{children:"My Places"}),Object(m.jsx)(B.a,{show:i,onHide:x,centered:!0,children:Object(m.jsx)(B.a.Body,{children:Object(m.jsx)(se,{onDone:function(){p(),x()}})})}),Object(m.jsxs)(_.a,{children:[n.map((function(e){return Object(m.jsx)(z.a,{lg:4,children:Object(m.jsxs)(ie,{onClick:function(){return h.push("/places/".concat(e.id))},children:[Object(m.jsx)("div",{style:{backgroundImage:"url(".concat(e.image,")")}}),Object(m.jsx)("p",{children:e.name})]})},e.id)})),Object(m.jsx)(z.a,{lg:4,children:Object(m.jsx)(oe,{onClick:function(){return j(!0)},children:"Add New Place"})})]})]})},le=n(46),be=n(38),de=n(74),ue=n(143),Oe=n(293),he=n(298),xe=function(e){var t,n=e.place,a=e.onDone,r=e.item,s=void 0===r?{}:r,i=Object(c.useState)(""),o=Object(d.a)(i,2),O=o[0],h=o[1],x=Object(c.useState)(!1),p=Object(d.a)(x,2),f=p[0],v=p[1],k=Object(c.useState)(s.category),y=Object(d.a)(k,2),C=y[0],w=y[1],N=Object(c.useState)(s.name),S=Object(d.a)(N,2),E=S[0],_=S[1],z=Object(c.useState)(s.price||0),T=Object(d.a)(z,2),L=T[0],I=T[1],D=Object(c.useState)(s.description),A=Object(d.a)(D,2),G=A[0],R=A[1],q=Object(c.useState)(s.image),H=Object(d.a)(q,2),U=H[0],B=H[1],Q=Object(c.useState)(void 0===s.is_available||!!s.is_available),Y=Object(d.a)(Q,2),F=Y[0],J=Y[1],$=Object(c.useRef)(null),V=Object(c.useContext)(g),Z=function(){var e=Object(b.a)(Object(l.a)().mark((function e(){var t;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c={name:O,place:n.id},r=V.token,u("/api/categories/",{data:c,token:r,method:"POST"});case 2:t=e.sent,console.log(t),t&&(Object(j.b)("Category ".concat(t.name," was created."),{type:"success"}),w(t.id),h(""),v(!1),a());case 5:case"end":return e.stop()}var c,r}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(b.a)(Object(l.a)().mark((function e(){var t;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c={place:n.id,category:C,name:E,price:L,description:G,image:U,is_available:F},r=V.token,u("/api/menu_items/",{data:c,token:r,method:"POST"});case 2:t=e.sent,console.log(t),t&&(Object(j.b)("Menu Item ".concat(t.name," was created"),{type:"success"}),w(""),_(""),I(0),R(""),B(""),J(!0),a());case 5:case"end":return e.stop()}var c,r}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(b.a)(Object(l.a)().mark((function e(){var t;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c=s.id,r={place:n.id,category:C,name:E,price:L,description:G,image:U,is_available:F},i=V.token,u("/api/menu_items/".concat(c),{data:r,token:i,method:"PATCH"});case 2:(t=e.sent)&&(console.log(t),Object(j.b)("Menu Item ".concat(t.name," was updated"),{type:"success"}),w(""),_(""),I(0),R(""),B(""),J(!1),a());case 4:case"end":return e.stop()}var c,r,i}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{children:[Object(m.jsxs)(M.a.Group,{children:[Object(m.jsx)(M.a.Label,{children:"Category"}),Object(m.jsxs)("div",{className:"d-flex align-items-center",children:[Object(m.jsxs)(M.a.Control,{as:"select",value:C,onChange:function(e){return w(e.target.value)},children:[Object(m.jsx)("option",{}),null===n||void 0===n||null===(t=n.categories)||void 0===t?void 0:t.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),Object(m.jsx)(P.a,{ref:$,variant:"link",onClick:function(){return v(!0)},children:Object(m.jsx)(de.b,{size:25})}),Object(m.jsx)(Oe.a,{show:f,target:$.current,placement:"bottom",rootClose:!0,onHide:function(){return v(!1)},children:Object(m.jsxs)(he.a,{id:"popover-contained",children:[Object(m.jsx)(he.a.Title,{as:"h3",children:"Category"}),Object(m.jsxs)(he.a.Content,{children:[Object(m.jsx)(M.a.Group,{children:Object(m.jsx)(M.a.Control,{type:"text",placeholder:"Category Name",value:O,onChange:function(e){return h(e.target.value)}})}),Object(m.jsx)(P.a,{variant:"standard",block:!0,onClick:Z,children:"Add Category"})]})]})})]})]}),Object(m.jsxs)(M.a.Group,{children:[Object(m.jsx)(M.a.Label,{children:"Name"}),Object(m.jsx)(M.a.Control,{type:"text",placeholder:"Enter Name",value:E,onChange:function(e){return _(e.target.value)}})]}),Object(m.jsxs)(M.a.Group,{children:[Object(m.jsx)(M.a.Label,{children:"Price"}),Object(m.jsx)(M.a.Control,{type:"number",placeholder:"Enter Price",value:L,onChange:function(e){return I(e.target.value)}})]}),Object(m.jsxs)(M.a.Group,{children:[Object(m.jsx)(M.a.Label,{children:"Description"}),Object(m.jsx)(M.a.Control,{type:"text",placeholder:"Enter Description",value:G,onChange:function(e){return R(e.target.value)}})]}),Object(m.jsxs)(M.a.Group,{children:[Object(m.jsx)(M.a.Label,{children:"Image"}),Object(m.jsx)(re,{value:U,onChange:B})]}),Object(m.jsx)(M.a.Group,{children:Object(m.jsx)(M.a.Check,{type:"checkbox",label:"Is available?",checked:F,onChange:function(e){return J(e.target.checked)}})}),Object(m.jsx)(P.a,{variant:"standard",block:!0,onClick:s.id?W:K,children:s.id?"Update Menu Item":"+ Add Menu Item"})]})},pe=n(141),me=Q.a.div(V||(V=Object(U.a)(["\n  border-radius: 5px;\n  background-color: white;\n  margin-bottom: 30px;\n  box-shadow: 1px 1px 8px rgba(0,0,0,0.1);\n  display: flex;\n  opacity: ",";\n  > div:first-child {\n    width: 40%;\n    border-top-left-radius: 5px;\n    border-bottom-left-radius: 5px;\n    background-size: cover;\n  }\n  > div:last-child {\n    padding: 15px 20px;\n    min-height: 150px;\n  }\n"])),(function(e){return e.active?1:.6})),fe=function(e){var t=e.item,n=e.onEdit,c=e.onRemove,a=e.onOrder,r=e.color;return Object(m.jsxs)(me,{active:t.is_available,children:[Object(m.jsx)(z.a,{xs:5,style:{backgroundImage:"url(".concat(t.image,")")}}),Object(m.jsxs)(z.a,{xs:7,className:"d-flex flex-column justify-content-between w-100",children:[Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[Object(m.jsx)("h4",{className:"mb-0",children:Object(m.jsx)("b",{children:t.name})}),Object(m.jsxs)("div",{children:[n?Object(m.jsx)(P.a,{variant:"link",onClick:n,children:Object(m.jsx)(pe.a,{size:20})}):null,c?Object(m.jsx)(P.a,{variant:"link",onClick:c,children:Object(m.jsx)(be.a,{size:20,color:"red"})}):null]})]}),Object(m.jsx)("p",{className:"mb-4",children:t.description})]}),Object(m.jsxs)("div",{className:"d-flex justify-content-between align-items-end",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("h5",{className:"mb-0 text-standard",children:Object(m.jsxs)("b",{style:{color:r},children:["$",t.price]})}),a?Object(m.jsx)(P.a,{variant:"standard",style:{backgroundColor:r},className:"mt-2",size:"sm",onClick:function(){return a(t)},children:t.quantity?"Add one more (".concat(t.quantity,")"):"Add to shopping cart"}):null]}),t.is_available?null:Object(m.jsx)("small",{className:"text-secondary",children:"Not Available"})]})]})]})},ve=n(103),ge=n.n(ve),ke=n(142),ye=Q.a.div(Z||(Z=Object(U.a)(["\n  position: relative;\n"]))),Ce=Q.a.div(K||(K=Object(U.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  background-color: rgba(255, 255, 255, 0.5);\n  > div {\n    margin: auto;\n  }\n"]))),we=Q.a.div(W||(W=Object(U.a)(["\n  text-align: center;\n  margin-top: 200px;\n  h1 {\n    font-size: 100px;\n    font-weight: bold;\n    margin-bottom: 50px;\n  }\n  h2 {\n    font-size: 60px;\n    margin-bottom: 100px\n  }\n"]))),Ne=function(e){var t=e.table,n=e.placeId,a=Object(c.useRef)(),r=Object(ke.useReactToPrint)({content:function(){return a.current}}),s="".concat(window.location.origin,"/menu/").concat(n,"/").concat(t);return Object(m.jsxs)(ye,{children:[Object(m.jsx)(ge.a,{value:s,size:200}),Object(m.jsx)(Ce,{children:Object(m.jsxs)("div",{className:"d-flex",children:[Object(m.jsx)(P.a,{variant:"standard",onClick:r,className:"mr-2",children:"Print Table ".concat(t)}),Object(m.jsx)(P.a,{variant:"standard",href:"/menu/".concat(n,"/").concat(t),target:"_blank",children:Object(m.jsx)(be.b,{size:25})})]})}),Object(m.jsx)("div",{style:{display:"none"},children:Object(m.jsxs)(we,{ref:a,children:[Object(m.jsxs)("h1",{children:["Table ",t]}),Object(m.jsx)("h2",{children:"Scan for menu"}),Object(m.jsx)(ge.a,{value:s,size:500})]})})]})},Se=Object(Q.a)(P.a)(X||(X=Object(U.a)(["\n  width: 30px;\n  height: 30px;\n  margin: 0 10px;\n  font-size: 20px;\n  line-height: 18px;\n"]))),Ee=function(e){var t=e.show,n=e.onHide,c=e.place,a=e.onUpdatePlace;return Object(m.jsx)(B.a,{show:t,onHide:n,size:"lg",centered:!0,children:Object(m.jsx)(B.a.Body,{className:"text-center pt-4",children:Object(m.jsxs)(E.a,{children:[Object(m.jsx)("h3",{children:"Tables QR Code"}),Object(m.jsxs)("div",{className:"d-flex align-items-center mt-4 mb-4",children:[Object(m.jsxs)("h5",{className:"mb-0 mr-2",children:["Total tables: ",Object(m.jsx)("b",{children:c.number_of_tables})]}),Object(m.jsx)(Se,{variant:"lightgray",size:"sm",onClick:function(){return a(c.number_of_tables-1)},children:"-"}),Object(m.jsx)(Se,{variant:"lightgray",size:"sm",onClick:function(){return a(c.number_of_tables+1)},children:"+"})]}),Object(m.jsx)(_.a,{children:Array.from({length:c.number_of_tables},(function(e,t){return t+1})).map((function(e){return Object(m.jsx)(z.a,{lg:4,md:6,className:"mb-4",children:Object(m.jsx)(Ne,{table:e,placeId:c.id})},e)}))})]})})})},_e=Q.a.div(ee||(ee=Object(U.a)(["\n  background-color: white;\n  padding: 20px;\n  border-radius: 5px;\n  box-shadow: 1px 1px 10px rgba(0,0,0,0.05);\n"]))),ze=function(){var e,t=Object(c.useState)({}),n=Object(d.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(!1),i=Object(d.a)(s,2),j=i[0],O=i[1],h=Object(c.useState)(null),f=Object(d.a)(h,2),v=f[0],k=f[1],y=Object(c.useState)(!1),C=Object(d.a)(y,2),w=C[0],N=C[1],S=function(){return O(!1)},E=Object(c.useContext)(g),T=Object(o.h)(),L=Object(o.g)(),I=function(){return L.push("/places")},A=function(){var e=Object(b.a)(Object(l.a)().mark((function e(){var t;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(T.id,E.token);case 2:(t=e.sent)&&r(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(e){window.confirm("Are you sure?")&&function(e,t){return u("/api/categories/".concat(e),{token:t,method:"DELETE"})}(e,E.token).then(A)},M=function(e){window.confirm("Are you sure?")&&function(e,t){return u("/api/menu_items/".concat(e),{token:t,method:"DELETE"})}(e,E.token).then(A)};return Object(c.useEffect)((function(){A()}),[]),Object(m.jsxs)(D,{children:[Object(m.jsxs)(_.a,{children:[Object(m.jsx)(z.a,{lg:12,children:Object(m.jsxs)("div",{className:"mb-4",children:[Object(m.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[Object(m.jsx)(P.a,{variant:"link",onClick:I,children:Object(m.jsx)(le.a,{size:25,color:"black"})}),Object(m.jsx)("h3",{className:"mb-0 ml-2 mr-2",children:a.name}),Object(m.jsx)(P.a,{variant:"link",onClick:function(){var e,t;window.confirm("Are you sure?")&&(e=T.id,t=E.token,u("/api/places/".concat(e),{token:t,method:"DELETE"})).then(I)},children:Object(m.jsx)(be.a,{size:25,color:"red"})})]}),Object(m.jsx)(P.a,{variant:"link",onClick:function(){return N(!0)},children:Object(m.jsx)(be.c,{size:25})}),Object(m.jsx)(P.a,{variant:"link",href:"/places/".concat(T.id,"/orders"),children:Object(m.jsx)(de.a,{size:25})}),Object(m.jsx)(P.a,{variant:"link",href:"/places/".concat(T.id,"/settings"),children:Object(m.jsx)(ue.a,{size:25})})]})}),Object(m.jsx)(z.a,{md:4,children:Object(m.jsx)(_e,{children:Object(m.jsx)(xe,{place:a,onDone:A})})}),Object(m.jsx)(z.a,{md:8,children:null===a||void 0===a||null===(e=a.categories)||void 0===e?void 0:e.map((function(e){return Object(m.jsxs)("div",{className:"mb-5",children:[Object(m.jsxs)("div",{className:"d-flex align-items-center mb-4",children:[Object(m.jsx)("h4",{className:"mb-0 mr-2",children:Object(m.jsx)("b",{children:e.name})}),Object(m.jsx)(P.a,{variant:"link",onClick:function(){return G(e.id)},children:Object(m.jsx)(be.a,{size:25,color:"red"})})]}),e.menu_items.map((function(e){return Object(m.jsx)(fe,{item:e,onEdit:function(){k(e),O(!0)},onRemove:function(){return M(e.id)}},e.id)}))]},e.id)}))})]}),Object(m.jsx)(B.a,{show:j,onHide:S,centered:!0,children:Object(m.jsxs)(B.a.Body,{children:[Object(m.jsx)("h4",{className:"text-center",children:"Menu Item"}),Object(m.jsx)(xe,{place:a,onDone:function(){A(),S()},item:v})]})}),Object(m.jsx)(Ee,{show:w,onHide:function(){return N(!1)},place:a,centered:!0,onUpdatePlace:function(e){p(a.id,{number_of_tables:e},E.token).then((function(e){e&&r(e)}))}})]})},Pe=n(57),Te=n(145),Le=Q.a.div(te||(te=Object(U.a)(["\n  text-align: center;\n  img {\n    border-radius: 5px;\n    margin-bottom: 20px;\n  }\n"]))),Ie=Q.a.div(ne||(ne=Object(U.a)(["\n  b, p {\n    ","\n  }\n"])),(function(e){var t=e.font;return t&&"font-family: ".concat(t,";")})),De=function(e){var t,n=e.place,c=e.shoppingCart,a=void 0===c?{}:c,r=e.onOrder,s=e.font,i=void 0===s?"":s,o=e.color,j=void 0===o?"":o;return Object(m.jsxs)(Ie,{font:i,children:[Object(m.jsxs)(Le,{children:[Object(m.jsx)("img",{src:n.image,width:100,height:100}),Object(m.jsx)("h3",{children:Object(m.jsx)("b",{children:n.name})})]}),null===n||void 0===n||null===(t=n.categories)||void 0===t?void 0:t.filter((function(e){return e.menu_items.filter((function(e){return e.is_available})).length})).map((function(e){return Object(m.jsxs)("div",{className:"mt-5",children:[Object(m.jsx)("h4",{className:"mb-4",children:Object(m.jsx)("b",{children:e.name})}),e.menu_items.filter((function(e){return e.is_available})).map((function(e){var t;return Object(m.jsx)(fe,{item:Object(k.a)(Object(k.a)({},e),{},{quantity:null===(t=a[e.id])||void 0===t?void 0:t.quantity}),onOrder:r,color:j},e.id)}))]},e.id)}))]})},Ae=n(144),Ge=n(49),Me=function(e){var t=e.amount,n=e.items,a=e.onDone,r=e.color,s=Object(c.useState)(!1),i=Object(d.a)(s,2),O=i[0],h=i[1],x=Object(Ge.useStripe)(),p=Object(Ge.useElements)(),f=Object(c.useContext)(g),v=Object(o.h)(),k=function(){var e=Object(b.a)(Object(l.a)().mark((function e(c){var r,s,i,o;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.next=3,x.createPaymentMethod({type:"card",card:p.getElement(Ge.CardElement)});case 3:if(r=e.sent,s=r.error,i=r.paymentMethod,s){e.next=12;break}return h(!0),e.next=10,l={payment_method:i,amount:t,place:v.id,table:v.table,detail:n},b=f.token,u("/api/create_payment_intent/",{data:l,token:b,method:"POST"});case 10:null!==(o=e.sent)&&void 0!==o&&o.success?(Object(j.b)("Your order #".concat(o.order," is processing"),{type:"success"}),a(),h(!1)):null!==o&&void 0!==o&&o.error&&(Object(j.b)(o.error,{type:"error"}),h(!1));case 12:case"end":return e.stop()}var l,b}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)(M.a,{onSubmit:k,children:[Object(m.jsx)(Ge.CardElement,{options:{hidePostalCode:!0}}),Object(m.jsx)(P.a,{variant:"standard",style:{backgroundColor:r},className:"mt-4",block:!0,type:"submit",disabled:O,children:O?"Processing...":"Pay"})]})},Re=Object(Ae.a)("pk_test_51MvZyLEUP5DwlQwsphTuRd99moQ0U1Eo19LA3YTwL5SYlQm16ygMCeCYWmZjU4V10OcmhmDVuhnYzx5gofEE4FAV002KdCGsxi"),qe=function(e){return Object(m.jsx)(Ge.Elements,{stripe:Re,children:Object(m.jsx)(Me,Object(k.a)({},e))})},He=function(e){var t=e.items,n=e.onAdd,a=e.onRemove,r=e.onPaymentDone,s=e.color,i=Object(c.useMemo)((function(){return t.map((function(e){return e.quantity*e.price})).reduce((function(e,t){return e+t}),0)}),[t]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h3",{className:"text-center mb-4",children:Object(m.jsx)("b",{children:"Your Order"})}),Object(m.jsx)(G.a,{children:Object(m.jsxs)(G.a.Body,{children:[t.map((function(e){return Object(m.jsxs)("div",{className:"d-flex mb-4 align-items-center",children:[Object(m.jsxs)("div",{className:"flex-grow-1",children:[Object(m.jsx)("p",{className:"mb-0",children:Object(m.jsx)("b",{children:e.name})}),Object(m.jsxs)("span",{children:["$",e.price]})]}),Object(m.jsxs)("div",{className:"d-flex align-items-center",children:[Object(m.jsx)(Se,{variant:"lightgray",size:"sm",onClick:function(){return a(e)},children:"-"}),Object(m.jsx)("span",{children:e.quantity}),Object(m.jsx)(Se,{variant:"lightgray",size:"sm",onClick:function(){return n(e)},children:"+"})]})]},e.id)})),Object(m.jsx)("hr",{}),Object(m.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(m.jsx)("h5",{children:Object(m.jsx)("b",{children:"Total"})}),Object(m.jsx)("h5",{children:Object(m.jsxs)("b",{children:["$",i]})})]}),Object(m.jsx)("hr",{className:"mb-4"}),Object(m.jsx)(qe,{amount:i,items:t,onDone:r,color:s})]})})]})},Ue=Object(Q.a)(P.a)(ce||(ce=Object(U.a)(["\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  border-radius: 50%;\n  box-shadow: 1px 1px 8px rgba(0,0,0,0.2);\n  width: 60px;\n  height: 60px;\n"]))),Be=function(){var e=Object(c.useState)({}),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)({}),s=Object(d.a)(r,2),i=s[0],j=s[1],u=Object(c.useState)(!1),O=Object(d.a)(u,2),h=O[0],p=O[1],f=Object(o.h)(),v=function(){var e=Object(b.a)(Object(l.a)().mark((function e(){var t;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(f.id);case 2:t=e.sent,console.log(t),t&&a(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(e){var t;j(Object(k.a)(Object(k.a)({},i),{},Object(Pe.a)({},e.id,Object(k.a)(Object(k.a)({},e),{},{quantity:((null===(t=i[e.id])||void 0===t?void 0:t.quantity)||0)+1}))))},y=Object(c.useMemo)((function(){return Object.keys(i).map((function(e){return i[e].quantity})).reduce((function(e,t){return e+t}),0)}),[i]);return Object(c.useEffect)((function(){v()}),[]),Object(m.jsxs)(E.a,{className:"mt-5 mb-5",children:[Object(m.jsx)(_.a,{className:"justify-content-center",children:Object(m.jsx)(z.a,{lg:8,children:h?Object(m.jsx)(He,{items:Object.keys(i).map((function(e){return i[e]})).filter((function(e){return e.quantity>0})),onAdd:g,onRemove:function(e){var t;1===y&&p(!1),j(Object(k.a)(Object(k.a)({},i),{},Object(Pe.a)({},e.id,Object(k.a)(Object(k.a)({},e),{},{quantity:((null===(t=i[e.id])||void 0===t?void 0:t.quantity)||0)-1}))))},onPaymentDone:function(){j({}),p(!1)},color:n.color}):Object(m.jsx)(De,{place:n,shoppingCart:i,onOrder:g,color:n.color,font:n.font})})}),y?Object(m.jsx)(Ue,{variant:"standard",style:{backgroundColor:n.color},onClick:function(){return p(!h)},children:h?Object(m.jsx)(Te.a,{size:25}):y}):null]})},Qe=function(e){var t=e.order,n=e.onComplete;return Object(m.jsxs)(G.a,{className:"mb-3",children:[Object(m.jsxs)(G.a.Header,{className:"d-flex justify-content-between",children:[Object(m.jsx)("span",{children:"Order #".concat(t.id," - Table #").concat(t.table)}),Object(m.jsx)("span",{children:Object(m.jsxs)("b",{children:["$",t.amount]})})]}),Object(m.jsxs)(G.a.Body,{className:"d-flex justify-content-between",children:[Object(m.jsx)("div",{children:JSON.parse(t.detail).map((function(e){return Object(m.jsxs)("div",{className:"mb-2",children:[Object(m.jsxs)("span",{children:["x",e.quantity]}),Object(m.jsx)("img",{src:e.image,width:30,height:30,style:{borderRadius:3,margin:"0 10px"}}),Object(m.jsx)("span",{children:e.name})]})}))}),Object(m.jsx)("div",{children:n?Object(m.jsx)(P.a,{variant:"standard",size:"md",onClick:n,children:"Done"}):null})]})]})},Ye=function(){var e,t=Object(c.useState)([]),n=Object(d.a)(t,2),a=n[0],r=n[1],s=Object(o.h)(),i=Object(o.g)(),j=Object(c.useContext)(g),O=function(){var e=Object(b.a)(Object(l.a)().mark((function e(){var t;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n=s.id,c=j.token,u("/api/orders/?place=".concat(n),{token:c});case 2:(t=e.sent)&&(console.log(t),r(t));case 4:case"end":return e.stop()}var n,c}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(b.a)(Object(l.a)().mark((function e(t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n=t,c={status:"completed"},a=j.token,u("/api/orders/".concat(n),{data:c,token:a,method:"PATCH"});case 2:e.sent&&O();case 4:case"end":return e.stop()}var n,c,a}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){O();var e=setInterval((function(){O()}),5e3);return function(){return clearInterval(e)}}),[]),Object(m.jsxs)(D,{children:[Object(m.jsxs)("div",{className:"d-flex align-items-center mb-4",children:[Object(m.jsx)(P.a,{variant:"link",onClick:function(){return i.push("/places/".concat(s.id))},children:Object(m.jsx)(le.a,{size:25,color:"black"})}),Object(m.jsx)("h3",{className:"mb-0 ml-2 mr-2",children:"My Orders"})]}),Object(m.jsx)(_.a,{className:"justify-content-center",children:null===a||void 0===a||null===(e=a.filter((function(e){return"processing"===e.status})))||void 0===e?void 0:e.map((function(e){return Object(m.jsx)(z.a,{lg:8,children:Object(m.jsx)(Qe,{order:e,onComplete:function(){return h(e.id)}})},e.id)}))})]})},Fe=n(150),Je=Q.a.div(ae||(ae=Object(U.a)(["\n  background-color: white;\n  padding: 20px;\n  border-radius: 5px;\n  box-shadow: 1px 1px 10px rgba(0,0,0,0.05);\n"]))),$e=function(){var e=Object(c.useState)({}),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(d.a)(r,2),i=s[0],u=s[1],O=Object(c.useState)(""),h=Object(d.a)(O,2),f=h[0],v=h[1],k=Object(c.useState)(!1),y=Object(d.a)(k,2),C=y[0],w=y[1],N=Object(o.h)(),S=Object(o.g)(),E=Object(c.useContext)(g),T=function(){var e=Object(b.a)(Object(l.a)().mark((function e(){var t;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(N.id);case 2:(t=e.sent)&&(a(t),u(t.font),v(t.color));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(b.a)(Object(l.a)().mark((function e(){var t;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,p(n.id,{font:i,color:f},E.token);case 3:(t=e.sent)&&(Object(j.b)("New settings is updated",{type:"success"}),a(t),w(!1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){T()}),[]),Object(m.jsxs)(D,{children:[Object(m.jsxs)("div",{className:"d-flex align-items-center mb-4",children:[Object(m.jsx)(P.a,{variant:"link",onClick:function(){return S.push("/places/".concat(N.id))},children:Object(m.jsx)(le.a,{size:25,color:"black"})}),Object(m.jsx)("h3",{className:"mb-0 mr-2 ml-2",children:"Menu Settings"})]}),Object(m.jsxs)(_.a,{children:[Object(m.jsx)(z.a,{md:4,children:Object(m.jsxs)(Je,{children:[Object(m.jsxs)(M.a.Group,{children:[Object(m.jsx)(M.a.Label,{children:"Font"}),Object(m.jsxs)(M.a.Control,{as:"select",value:i,onChange:function(e){return u(e.target.value)},children:[Object(m.jsx)("option",{children:"Lato"}),Object(m.jsx)("option",{children:"Teko"}),Object(m.jsx)("option",{children:"Lobster"}),Object(m.jsx)("option",{children:"Caveat"}),Object(m.jsx)("option",{children:"Indie Flower"})]})]}),Object(m.jsxs)(M.a.Group,{children:[Object(m.jsx)(M.a.Label,{children:"Color"}),Object(m.jsx)(Fe.a,{color:f,onChange:function(e){return v(e.hex)},disableAlpha:!0,width:"100%"})]}),Object(m.jsx)(P.a,{className:"mt-4",variant:"standard",block:!0,onClick:L,disabled:C,children:"Save Setings"})]})}),Object(m.jsx)(z.a,{md:8,children:Object(m.jsx)(De,{place:n,font:i,color:f,onOrder:function(){return[]}})})]})]})};var Ve=function(){return Object(m.jsxs)(v,{children:[Object(m.jsx)(i.a,{children:Object(m.jsxs)(o.d,{children:[Object(m.jsx)(o.b,{exact:!0,path:"/",children:Object(m.jsx)(A,{})}),Object(m.jsx)(o.b,{exact:!0,path:"/login",children:Object(m.jsx)(q,{})}),Object(m.jsx)(o.b,{exact:!0,path:"/register",children:Object(m.jsx)(H,{})}),Object(m.jsx)(o.b,{exact:!0,path:"/menu/:id/:table",children:Object(m.jsx)(Be,{})}),Object(m.jsx)(N,{exact:!0,path:"/places/:id",children:Object(m.jsx)(ze,{})}),Object(m.jsx)(N,{exact:!0,path:"/places",children:Object(m.jsx)(je,{})}),Object(m.jsx)(N,{exact:!0,path:"/places/:id/orders",children:Object(m.jsx)(Ye,{})}),Object(m.jsx)(N,{exact:!0,path:"/places/:id/settings",children:Object(m.jsx)($e,{})})]})}),Object(m.jsx)(j.a,{})]})};s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(Ve,{})}),document.getElementById("root"))}},[[283,1,2]]]);
//# sourceMappingURL=main.18385e3e.chunk.js.map